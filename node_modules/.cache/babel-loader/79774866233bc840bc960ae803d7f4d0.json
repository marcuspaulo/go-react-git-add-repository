{"ast":null,"code":"import _regeneratorRuntime from \"/Users/marcus/DESENVOLVIMENTO/rocketseat/cursos/goreact/go-react-nova-aplicacao/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(addFavorite);\n\nimport { call, put } from 'redux-saga/effects';\nimport api from '../../services/api';\nimport { Creators as FavoriteActions } from '../ducks/favorites';\nexport function addFavorite(action) {\n  var _ref, data, repositoryData;\n\n  return _regeneratorRuntime.wrap(function addFavorite$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return call(api.get, \"/repos/\".concat(action.payload.repository));\n\n        case 3:\n          _ref = _context.sent;\n          data = _ref.data;\n          repositoryData = {\n            id: data.id,\n            name: data.full_name,\n            description: data.description,\n            url: data.html_url\n          };\n          _context.next = 8;\n          return put(FavoriteActions.addFavoriteSuccess(repositoryData));\n\n        case 8:\n          _context.next = 14;\n          break;\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 14;\n          return put(FavoriteActions.addFavoriteFailure('Erro ao adicionar repositório'));\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this, [[0, 10]]);\n}","map":{"version":3,"sources":["/Users/marcus/DESENVOLVIMENTO/rocketseat/cursos/goreact/go-react-nova-aplicacao/src/store/sagas/favorites.js"],"names":["addFavorite","call","put","api","Creators","FavoriteActions","action","get","payload","repository","data","repositoryData","id","name","full_name","description","url","html_url","addFavoriteSuccess","addFavoriteFailure"],"mappings":";;;;yBAKiBA,W;;AALjB,SAASC,IAAT,EAAeC,GAAf,QAA0B,oBAA1B;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,SAASC,QAAQ,IAAIC,eAArB,QAA4C,oBAA5C;AAEA,OAAO,SAAUL,WAAV,CAAsBM,MAAtB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEc,iBAAML,IAAI,CAACE,GAAG,CAACI,GAAL,mBAAoBD,MAAM,CAACE,OAAP,CAAeC,UAAnC,EAAV;;AAFd;AAAA;AAEKC,UAAAA,IAFL,QAEKA,IAFL;AAIGC,UAAAA,cAJH,GAIoB;AACrBC,YAAAA,EAAE,EAAEF,IAAI,CAACE,EADY;AAErBC,YAAAA,IAAI,EAAEH,IAAI,CAACI,SAFU;AAGrBC,YAAAA,WAAW,EAAEL,IAAI,CAACK,WAHG;AAIrBC,YAAAA,GAAG,EAAEN,IAAI,CAACO;AAJW,WAJpB;AAAA;AAWH,iBAAMf,GAAG,CAACG,eAAe,CAACa,kBAAhB,CAAmCP,cAAnC,CAAD,CAAT;;AAXG;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAaH,iBAAMT,GAAG,CAACG,eAAe,CAACc,kBAAhB,CAAmC,+BAAnC,CAAD,CAAT;;AAbG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { call, put } from 'redux-saga/effects';\nimport api from '../../services/api';\n\nimport { Creators as FavoriteActions } from '../ducks/favorites';\n\nexport function* addFavorite(action) {\n  try {\n    const { data } = yield call(api.get, `/repos/${action.payload.repository}`);\n\n    const repositoryData = {\n      id: data.id,\n      name: data.full_name,\n      description: data.description,\n      url: data.html_url,\n    };\n\n    yield put(FavoriteActions.addFavoriteSuccess(repositoryData));\n  } catch (err) {\n    yield put(FavoriteActions.addFavoriteFailure('Erro ao adicionar repositório'));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}